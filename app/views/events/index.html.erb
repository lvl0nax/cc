<script type="text/javascript">
  
  function doCheckbox(elem)
  {
    /*alert(elem.attr("checked"));
    elem.removeAttr("checked");
    alert(elem.attr("checked"));*/
    if (elem.attr("checked"))
    {
      /*elem.removeAttr("checked");*/
      elem.eq(0).parent().css("background-position", "0 -20px");
    }
    else
    {
      /*elem.attr("checked", "checked");*/
      elem.parent().css("background-position", "0 0");

    }
  }

  function doCheckboxmn(elem)
  {
    if (elem.attr("checked"))
    {
      elem.find("input[type=checkbox]").attr('checked', 'checked');
      elem.parent().children("span.chkimg").first().css("background-position", "0 -19px");
    }
    else
    {
      elem.find("input[type=checkbox]").removeAttr('checked');
      elem.parent().children("span.chkimg").first().css("background-position", "0 0");
    }
  }
$(function() {
 $.fn.scrollToTop = function() {
  $(this).hide().removeAttr("href");
  if ($(window).scrollTop() >= "250") $(this).fadeIn("slow")
  var scrollDiv = $(this);
  $(window).scroll(function() {
   if ($(window).scrollTop() <= "250") $(scrollDiv).fadeOut("slow")
   else $(scrollDiv).fadeIn("slow")
  });
  $(this).click(function() {
   $("html, body").animate({scrollTop: 0}, "slow")
  })
 }
});

$(function() {
 $("#Go_Top").scrollToTop();
});
</script>

<div class = "menu">

  <%= form_for events_path, :method => 'get', :html => {:id => 'events_search'}, :remote => true  do %>
    <input type="hidden" name="year" value="" />
    <input type="hidden" name="month" value="" />

    <div class="trainings">
      <label class="mnl">
        <span class="name">СТАЖИРОВКИ</span>
        <span class="chkimg"></span>
        <input type="checkbox" checked="checked" class="training_checkbox mn" name="trainings" onclick="$('.search_training').toggle(); $('.trainings').toggleClass('filter-closed'); doCheckboxmn($(this));"/>
                <span class="counter">
          <%= Training.all.count %>
        </span>
      </label>
      <div class="for_clear"></div>
      <div class="search_training">
        <div class="area-label-name">СФЕРА</div>
        <div class="select">
          <div id="trclick" class="area-label">ВСЕ</div>
          <div class="dropdown ard">  
            <div class="drop-area-label">ВСЕ</div>
            <%= simple_fields_for :training_areas do |f| %>
              <%= f.input :areas, :label => false , :collection => Area.all, :as => :check_boxes, :required => false, :input_html => {:checked=> true, :selected => true, :onclick => "doCheckbox($(this));"} %>

            <% end %>
            <div class="for_clear"></div>
          </div>  
        </div>
        <div class="area-label-name padd">КОМПАНИИ</div>
        <div class="select">
          <div id="trcclick" class="area-label">ВСЕ</div>
          <div class="dropdown ardc">  
            <div class="drop-area-label">ВСЕ</div>
            <% unless User.employers.blank? %>
              <%= simple_fields_for :companies_list do |f| %>
                <%= f.input :companies, :label => false , :collection => User.employers, :as => :check_boxes, :required => false, :input_html => {:checked=> true, :onclick => "doCheckbox($(this));"} %>
              <% end %>
            <% end %>
            <div class="for_clear"></div>
          </div>  
        </div>
          
          <%= simple_fields_for :training_salary_type do |f| %>  
            <%= f.input :salary_type, :label => "ОПЛАТА:" , :collection => ["ОПЛАЧИВАЕМАЯ", "НЕОПЛАЧИВАЕМАЯ" ], :as => :check_boxes, :required => false, :input_html => {:checked=> true, :title => "area", :onclick => "doCheckbox($(this));"}%>
          <% end %>
        <div class="for_clear"></div>
                 
      </div>
    </div>
    <div class="events">
      <label class="mnl">
        <span class="name">СОБЫТИЯ</span>
        <span class="chkimg"></span>
        <input type="checkbox" checked="checked" class="event_checkbox mn" name="events" onclick="$('.search_event').toggle(); $('.events').toggleClass('filter-closed'); doCheckboxmn($(this));"/>
        <span class="counter">
          <%= Event.all.count %>
        </span>        
      </label>      
      <div class="for_clear"></div>
      <div class="search_event">
        <div class="area-label-name">СФЕРА</div>
        <div class="select">
          <div id="evclick" class="area-label">ВСЕ</div>
          <div class="dropdown arde">  
            <div class="drop-area-label">ВСЕ</div>
            <%= simple_fields_for :event_areas do |f| %>
              <%= f.input :areas, :label =>false , :collection => Area.all, :as => :check_boxes, :required => false, :input_html => {:checked=> true, :onclick => "doCheckbox($(this));"}, :wrapper_html => { :class => 'evshadow' } %>
            <% end %>
          </div>  
        </div>

        <div class="evtype">
          <%= simple_fields_for :event_kinds do |f| %>
            <%= f.input :kind, :label => "" , :collection => ["НАУЧНАЯ КОНФЕРЕНЦИЯ", "КАРЬЕРНОЕ СОБЫТИЕ" ], :as => :check_boxes, :required => false, :input_html => {:checked=> true, :onclick => "doCheckbox($(this));"} %>
          <% end %>
          <div class="for_clear"></div>
        </div>
      </div>
    </div>

    <div class="grants">
      
      <label class="mnl">
        <span class="name">ГРАНТЫ</span>
        <span class="chkimg"></span>
        <input type="checkbox" checked="checked" class="grant_checkbox mn" name="grants" onclick="$('.search_grant').toggle(); $('.grants').toggleClass('filter-closed'); doCheckboxmn($(this));"/>

        <span class="counter">
          <%= Grant.all.count %>
        </span>
      </label>
      
      <div class="for_clear"></div>
      <div class="search_grant">
        <%= simple_fields_for :grant_areas do |f| %>
          <%= f.input :direction, :label => "НАУКИ" , :collection => ["ЕСТЕСТВЕННЫЕ", "ГУМАНИТАРНЫЕ", "ОБЩЕСТВЕННЫЕ", "ТЕХНИЧЕСКИЕ", "МАТЕМАТИЧЕСКИЕ И IT", "ЛЮБАЯ"], :as => :check_boxes, :required => false, :input_html => {:checked=> true, :onclick => "doCheckbox($(this));"} %>
        <% end %>
        <div class="for_clear"></div>
      </div>
    </div>
    
  <% end %>

</div>
<div id="list_items">
  <%= render "items" %>
</div>
<a style='position: fixed; bottom: 30px; left: 1px; cursor:pointer; display:none;'
href='#' id='Go_Top'>
 НАВЕРХ
</a>